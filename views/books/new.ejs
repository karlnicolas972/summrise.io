<% include ../partials/header %>

<div class="ui main text container segment">

  <div class="ui huge header">
    <h1>Add a new book</h1>
  </div>

  <% if (request) { %>
    <form class="ui form" action="/books/new/<%= request._id %>" method="POST">
      <div class="field">
        <label for="title">Title:</label>
        <input type="text" name="title" value="<%= request.title %>">
      </div>
      <div class="field">
        <label for="author">Author:</label>
        <input type="text" name="author" value="<%= request.author %>">
      </div>
      <div class="field">
        <label for="description">Description:</label>
        <textarea name="description" class="editor" placeholder="Short description of the book"></textarea>
      </div>
      <!-- <div class="field">
        <select class="ui fluid search dropdown" name="genres" multiple>

        </select>
      </div> -->
      <button class="ui button">Submit!</button>
    </form>
  <% } else { %>
    <form class="ui form" action="/books/new/" method="POST">
      <div class="field">
        <label for="title">Title:</label>
        <input type="text" name="title" placeholder="Title">
      </div>
      <div class="field">
        <label for="author">Author:</label>
        <input type="text" name="author" placeholder="Author">
      </div>
      <div class="field">
        <label for="genres">Genres:</label>
        <select class="ui fluid search dropdown" name="genres" multiple>
          <option value="">Add genres for this book</option>
          <% genres.forEach(function(genre) { %>
            <option value="<%= genre._id %>"><%= genre.name %></option>
          <% }); %>
        </select>
      </div>
      <div class="field">
        <label for="description">Description:</label>
        <textarea name="description" class="editor" placeholder="Short description of the book"></textarea>
      </div>
      <button class="ui button">Submit!</button>
    </form>
  <% } %>


</div>

<% include ../partials/footer %>
