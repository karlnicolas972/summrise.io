<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Summrise.io - Create Your Own Book Summaries</title>
  <link rel="stylesheet" href="/stylesheets/app.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.14/semantic.min.css">
</head>
<body>

  <div class="ui left vertical menu inverted labeled icon sidebar">
    <a href="/" class="header item"><i class="cubes icon"></i>Summrise.io</a>
    <a href="/books" class="item"><i class="book icon"></i>View Books</a>
    <% if (currentUser && currentUser.isAdmin) { %>
      <a href="/books/new" class="item"><i class="plus square outline icon"></i>Add Book</a>
    <% } else { %>
      <a href="/books/request" class="item"><i class="plus square outline icon"></i>Request Book</a>
    <% } %>
    <a href="#" class="item"><i class="browser icon"></i>Blog</a>
    <a href="#" class="item"><i class="mail icon"></i>Contact Us</a>
  </div>

  <div class="ui big top menu inverted sidebar">
    <div class="ui center aligned page grid container">
      <form class="ui inverted transparent action icon input" action="/books/search" method="GET">
        <input type="text" name="key" placeholder="Search for a book...">
        <button class="ui black icon button"><i class="search icon"></i></button>
      </form>
    </div>
  </div>

  <div class="ui right vertical menu inverted labeled icon sidebar">
    <% if (currentUser) { %>
      <span class="header item"><i class="user outline icon"></i><%= currentUser.username %> </span>
      <% if (currentUser.isAdmin) { %>
      <a href="/register" class="item"><i class="add user icon"></i>Add user</a>
      <% } %>
      <a href="/logout" class="item"><i class="remove user icon"></i>Log-out</a>
    <% } else { %>
      <a class="item" href="/register"><i class="add user icon"></i>Sign Up</a>
      <a class="item" href="/login"><i class="user circle icon"></i>Log-in</a>
    <% } %>
  </div>

<div class="dimmed pusher"> <!-- The closing div for this is located at the footer.ejs file -->

  <div class="ui big fixed inverted menu">
    <div class="ui centered grid container">

      <div class="computer only row">
        <a href="/" class="header item"><i class="cubes icon"></i>Summrise.io</a>
        <a class="header item left-sidebar-toggle"><i class="sidebar icon"></i></a>
        <div class="header item">
          <form class="ui inverted transparent action icon input" action="/books/search" method="GET">
            <input type="text" name="key" placeholder="Search for a book...">
            <button class="ui black icon button"><i class="search icon"></i></button>
          </form>
        </div>
        <div class="right menu">
          <% if (currentUser) { %>
            <span class="header item"><i class="user outline icon"></i>User: <%= currentUser.username %> </span>
            <% if (currentUser.isAdmin) { %>
            <!-- <a href="/register" class="header item"><i class="add user icon"></i>Add user</a> -->
              <div class="header item">
                <div class="ui top right pointing dropdown">
                  <div class="text"><i class="add user icon"></i>Add user</div>
                    <div class="menu">
                      <form class="ui login form" action="/register" method="post">
                        <div class="field">
                          <label for="username">Username:</label>
                          <input type="text" name="username"  placeholder="Username">
                        </div>
                        <div class="field">
                          <label for="password">Password:</label>
                          <input type="password" name="password" placeholder="Password">
                        </div>
                        <div class="field">
                          <div class="ui toggle checkbox">
                            <input type="checkbox" name="isAdmin" value="true" tabindex="0" class="hidden">
                            <label for="isAdmin">Add this user as administrator</label>
                          </div>
                        </div>
                        <input class="ui fluid button" type="submit" value="Add user">
                      </form>
                      <div class="menu">
                        <div class="item"><div class="text"><i class="add user icon"></i>Add user</div></div>
                      </div>
                    </div>
                </div>
              </div>
            <% } %>
            <a href="/logout" class="header item"><i class="remove user icon"></i>Log-out</a>
          <% } else { %>
            <!-- <a class="header item" href="/register"><i class="add user icon"></i>Sign-up</a> -->
            <div class="header item">
              <div class="ui top right pointing dropdown">
                <div class="text"><i class="add user icon"></i>Sign Up</div>
                  <div class="menu">
                    <form class="ui form" action="/register" method="post">
                      <div class="field">
                        <label for="username">Username:</label>
                        <input type="text" name="username"  placeholder="Username">
                      </div>
                      <div class="field">
                        <label for="password">Password:</label>
                        <input type="password" name="password" placeholder="Password">
                      </div>
                      <input class="ui fluid button" type="submit" value="Sign-up!">
                    </form>
                    <div class="menu">
                      <div class="item"><div class="text"><i class="add user icon"></i>Sign Up</div></div>
                    </div>
                  </div>
              </div>
            </div>
            <!-- <a class="header item" href="/login"><i class="user circle icon"></i>Log-in</a> -->
            <div class="header item">
              <div class="ui top right pointing dropdown">
                <div class="text"><i class="user circle icon"></i>Log-in</div>
                  <div class="menu">
                    <form class="ui form" action="/login" method="POST">
                      <div class="field">
                        <div class="ui left icon input">
                          <i class="user icon"></i>
                          <input type="text" name="username" placeholder="Username">
                        </div>
                      </div>
                      <div class="field">
                        <div class="ui left icon input">
                          <i class="lock icon"></i>
                          <input type="password" name="password" placeholder="Password">
                        </div>
                      </div>
                      <button class="ui fluid button">Log-in</button>
                    </form>
                    <div class="menu">
                      <div class="item"><div class="text"><i class="user circle icon"></i>Log-in</div></div>
                    </div>
                  </div>
              </div>
            </div>
          <% } %>
        </div>
      </div>

      <div class="mobile only row">
        <a href="/" class="header item"><i class="cubes icon"></i>Summrise.io</a>
        <a class="header item top-sidebar-toggle"><i class="search icon"></i></a>
        <a class="header item left-sidebar-toggle right-sidebar-toggle"><i class="sidebar icon"></i></a>
      </div>

      <div class="tablet only row">
        <a href="/" class="header item"><i class="cubes icon"></i>Summrise.io</a>
        <div class="header item">
          <form class="ui inverted transparent action icon input" action="/books/search" method="GET">
            <input type="text" name="key" placeholder="Search for a book...">
            <button class="ui black icon button"><i class="search icon"></i></button>
          </form>
        </div>
        <a class="header item left-sidebar-toggle right-sidebar-toggle"><i class="sidebar icon"></i></a>
      </div>


    </div>
  </div>

    <% if (error && error.length > 0) { %>
      <% if (isLoginOrSignupPage) { %>
        <div class="ui flash container login-margin">
      <% } else { %>
        <div class="ui flash container">
      <% } %>
          <div class="ui large negative message">
            <i class="close icon"></i>
            <%= error %>
          </div>
        </div>
    <% } %>


    <% if (success && success.length > 0) { %>
      <% if (isLoginOrSignupPage) { %>
        <div class="ui flash container login-margin">
      <% } else { %>
        <div class="ui flash container">
      <% } %>
        <div class="ui large positive message">
          <i class="close icon"></i>
          <%= success %>
        </div>
      </div>
    <% } %>
